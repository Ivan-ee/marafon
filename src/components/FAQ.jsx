import React, {useEffect, useRef, useState} from "react";
import { animateScroll as scroll } from "react-scroll";

import arrowWhite from "../assets/up.svg";
import arrowBlack from "../assets/down.svg";
import {Die} from "./Die.jsx";

export const FAQ = () => {
    const [accordionItems, setAccordionItems] = useState([
        {
            id: "accordion-button-1",
            title:
                "–ú–∞—Ä–∞—Ñ–æ–Ω –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –Ω–æ–≤–∏—á–∫–æ–≤? –Ø –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ø–∏—Å–∞–ª, —É –º–µ–Ω—è –ø–æ–ª—É—á–∏—Ç—Å—è?",
            content:
                "–î–∞, –º–∞—Ä–∞—Ñ–æ–Ω —Å–æ–∑–¥–∞–Ω –¥–ª—è —Ç–µ—Ö, –∫—Ç–æ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ø–∏—Å–∞–ª. –û–±—É—á–µ–Ω–∏–µ –≤—ã—Å—Ç—Ä–æ–µ–Ω–æ‚Ä®–æ—Ç –ø—Ä–æ—Å—Ç–æ–≥–æ –∫ —Å–ª–æ–∂–Ω–æ–º—É: –º—ã –Ω–µ –∑–∞—Å—Ç–∞–≤–ª—è–µ–º—Å –ø–µ—Ä–≤–æ–≥–æ –¥–Ω—è –ø–∏—Å–∞—Ç—å –æ–≥—Ä–æ–º–Ω—ã–µ‚Ä®—Å—Ç–∞—Ç—å–∏, ‚Äî –Ω–µ—Ç. –°–Ω–∞—á–∞–ª–∞ –Ω–∞—á–∏–Ω–∞–µ–º —Å –æ—Å–Ω–æ–≤: —É—á–∏–º—Å—è –∏–∑–±–∞–≤–ª—è—Ç—å—Å—è –æ—Ç –ª–∏—à–Ω–∏—Ö —Å–ª–æ–≤,‚Ä®—Å–∫–ª–∞–¥—ã–≤–∞—Ç—å —Å–ª–æ–≤–∞ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è, –∞ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è ‚Äî–≤ –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –∞–±–∑–∞—Ü—ã.‚Ä®–ò —Ç–æ–ª—å–∫–æ –∫ –∫–æ–Ω—Ü—É –º–∞—Ä–∞—Ñ–æ–Ω–∞ —É—á–µ–Ω–∏–∫–∏ –ø–∏—à—É—Ç –ø–µ—Ä–≤—ã–π —Ç–µ–∫—Å—Ç, –∞ —Ä–µ–¥–∞–∫—Ç–æ—Ä—ã –¥–∞—é—Ç‚Ä®–∫ –Ω–µ–º—É —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∏ –ø–æ–º–æ–≥–∞—é—Ç –Ω–∞–ø–∏—Å–∞—Ç—å, –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –∏–¥—ë—Ç –Ω–µ —Ç–∞–∫.",
            buttonClass: "b1",
            color: "white",
        },
        {
            id: "accordion-button-2",
            title:
                "–í –∫–∞–∫–æ–º —Ñ–æ—Ä–º–∞—Ç–µ –ø—Ä–æ—Ö–æ–¥—è—Ç —É—Ä–æ–∫–∏?",
            content:
                "–í—Å—è —Ç–µ–æ—Ä–∏—è –≤ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —É—Ä–æ–∫–∞—Ö –∏ –∫–æ—Ä–æ—Ç–∫–∏—Ö –≤–µ–±–∏–Ω–∞—Ä–∞—Ö. –°–Ω–∞—á–∞–ª–∞ –º—ã –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º \n" +
                "–≤–∞–º —Ç–µ–∫—Å—Ç–æ–≤—ã–π —É—Ä–æ–∫, –≤—ã –¥–µ–ª–∞–µ—Ç–µ –¥–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ ‚Äî –∞ –ø–æ—Å–ª–µ —Å–º–æ—Ç—Ä–∏—Ç–µ \n" +
                "–∫–æ—Ä–æ—Ç–∫–∏–π –≤–µ–±–∏–Ω–∞—Ä —Å —Ä–∞–∑–±–æ—Ä–æ–º –æ—à–∏–±–æ–∫. –¢–µ–∫—Å—Ç–æ–≤—ã—Ö —É—Ä–æ–∫–∏ –º–æ–∂–Ω–æ –∏–∑—É—á–∞—Ç—å \n" +
                "–≤ –º–µ—Ç—Ä–æ, –∫–∞—Ñ–µ –∏–ª–∏ –Ω–∞ —É–ª–∏—Ü–µ, –∞ –≤–µ–±–∏–Ω–∞—Ä—ã —Å–º–æ—Ç—Ä–µ—Ç—å –≤ –ª—é–±–æ–µ —Å–≤–æ–±–æ–¥–Ω–æ–µ –≤—Ä–µ–º—è ‚Äî \n" +
                "—ç—Ç–æ —É–¥–æ–±–Ω–æ.",
            buttonClass: "b2",
            color: "black",
        },
        {
            id: "accordion-button-3",
            title:
                "–ï—Å–ª–∏ —É –º–µ–Ω—è –≤–æ–∑–Ω–∏–∫–Ω–µ—Ç –≤–æ–ø—Ä–æ—Å?",
            content:
                " –í—ã –º–æ–∂–µ—Ç–µ –∑–∞–¥–∞—Ç—å –µ–≥–æ –≤ –æ–±—â–µ–º —á–∞—Ç–µ ‚Äî –ª–∏—á–Ω–æ –º–Ω–µ –∏–ª–∏ –Ω–∞—à–∏–º –∫—É—Ä–∞—Ç–æ—Ä–∞–º. –ß–µ–º \n" +
                "–±–æ–ª—å—à–µ –≤–æ–ø—Ä–æ—Å–æ–≤ ‚Äî —Ç–µ–º –ª—É—á—à–µ. –ú–æ–∂–µ—Ç–µ –∑–∞–¥–∞–≤–∞—Ç—å –≤–æ–ø—Ä–æ—Å—ã –Ω–∞ –ª—é–±—ã–µ —Ç–µ–º—ã:\n" +
                "–ø–æ —Ä–µ–∫–ª–∞–º–µ, —Å–≤–æ–∏–º —Ç–µ–∫—Å—Ç–∞–º –∏–ª–∏ –ø–æ–∏—Å–∫—É –∫–ª–∏–µ–Ω—Ç–æ–≤ ‚Äî –º—ã –æ—Ç–≤–µ—Ç–∏–º –∏ –ø–æ–¥—Å–∫–∞–∂–µ–º.",
            buttonClass: "b3",
            color: "black",
        },
        {
            id: "accordion-button-4",
            title:
                "–Ø —É–∂–µ —Ä–∞–±–æ—Ç–∞—é —Å —Ç–µ–∫—Å—Ç–æ–º –Ω–∞ —Ö–æ—Ä–æ—à–µ–º —É—Ä–æ–≤–Ω–µ, –º–Ω–µ —Å—Ç–æ–∏—Ç –∏–¥—Ç–∏ –Ω–∞ –º–∞—Ä–∞—Ñ–æ–Ω?",
            content:
                "–ù–µ—Ç, –≤–∞–º –ª—É—á—à–µ –ø–æ–¥–æ–π–¥–µ—Ç¬†–æ—Å–Ω–æ–≤–Ω–æ–π –∫—É—Ä—Å ¬´–°–∏–ª—å–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä¬ª. –ù–∞ –Ω—ë–º \n" +
                "—É–≥–ª—É–±–ª–µ–Ω–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞ –∏ –±–æ–ª—å—à–µ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏. –ü–æ—Å–ª–µ –æ–±—É—á–µ–Ω–∏—è –º—ã \n" +
                "–ø–æ–º–æ–≥–∞–µ–º —É—á–µ–Ω–∏–∫–∞–º —Ç—Ä—É–¥–æ—É—Å—Ç—Ä–æ–∏—Ç—å—Å—è –≤ –∫–æ–º–ø–∞–Ω–∏–∏, –∞ –æ—Å–æ–±–µ–Ω–Ω–æ –ª—é–±–∏–º—ã—Ö \n" +
                "–∑–∞–±–∏—Ä–∞–µ–º —Å–µ–±–µ –≤ –∞–≥–µ–Ω—Ç—Å—Ç–≤–æ. –ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ –ø—Ä–æ–≥—Ä–∞–º–º–µ –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö —É—á–µ–Ω–∏–∫–æ–≤ \n" +
                "—Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ ¬´–°–∏–ª—å–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä¬ª",
            buttonClass: "b4",
            color: "white",
        },
        {
            id: "accordion-button-5",
            title:
                "–Ø —Å–º–æ–≥—É –ø—Ä–æ—Ö–æ–¥–∏—Ç—å –º–∞—Ä–∞—Ñ–æ–Ω —Å —Ç–µ–ª–µ—Ñ–æ–Ω–∞?",
            content:
                "–î–∞, –≤—Å–µ —É—Ä–æ–∫–∏ –∏ –≤–µ–±–∏–Ω–∞—Ä—ã –º–æ–∂–Ω–æ —Å–º–æ—Ç—Ä–µ—Ç—å —Å —Ç–µ–ª–µ—Ñ–æ–Ω–∞. –î–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ \n" +
                "—Ç–æ–∂–µ –º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å —Å —Ç–µ–ª–µ—Ñ–æ–Ω–∞. –í –æ–±—â–µ–º, –¥–∞, –ø—Ä–æ—Ö–æ–¥–∏—Ç—å –º–∞—Ä–∞—Ñ–æ–Ω –º–æ–∂–Ω–æ \n" +
                "—Å —Ç–µ–ª–µ—Ñ–æ–Ω–∞.",
            buttonClass: "b5",
            color: "white",
        },
        {
            id: "accordion-button-6",
            title:
                "–ù—É–∂–Ω–æ –ª–∏ –±—ã—Ç—å –≥—Ä–∞–º–æ—Ç–Ω—ã–º, —á—Ç–æ–±—ã –∏–¥—Ç–∏ –Ω–∞ –º–∞—Ä–∞—Ñ–æ–Ω?",
            buttonClass: "b6",
            color: "black",
            content:
                "–ù–µ—Ç, –∏ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –º—ã –∑–∞–ø–∏—Å–∞–ª–∏ –≤–∏–¥–µ–æ –æ –ø—è—Ç–∏ –º–∏—Ñ–∞—Ö \n" +
                "–æ –∫–æ–ø–∏—Ä–∞–π—Ç–∏–Ω–≥–µ. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –∏ –ø–æ–π–º–∏—Ç–µ. –í—Å—ë, —á—Ç–æ –≤—ã –∑–Ω–∞–ª–∏ –æ —Ç–µ–∫—Å—Ç–∞—Ö ‚Äî –º–æ–≥–ª–æ \n" +
                "–æ–∫–∞–∑–∞—Ç—å—Å—è —Å–æ–≤—Å–µ–º –Ω–µ —Ç–∞–∫.",
        },
        {
            id: "accordion-button-7",
            title:
                "–°–æ —Å–∫–æ–ª—å–∫–∏ –ª–µ—Ç –º–æ–∂–Ω–æ –Ω–∞—á–∞—Ç—å —É—á–∏—Ç—å—Å—è?",
            buttonClass: "b7",
            color: "white",
            content:
                "–ù–∞—à –º–∞—Ä–∞—Ñ–æ–Ω –ø—Ä–æ—Ö–æ–¥—è—Ç —É—á–µ–Ω–∏–∫–∏ –≤—Å–µ—Ö –≤–æ–∑—Ä–∞—Å—Ç–æ–≤. –ì–ª–∞–≤–Ω–æ–µ ‚Äî –∂–µ–ª–∞–Ω–∏–µ —É—á–∏—Ç—å—Å—è \n" +
                "–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —á–∞—Å–æ–≤ —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏.",
        },
        {
            id: "accordion-button-8",
            title:
                "–ß—Ç–æ, –µ—Å–ª–∏ —è –Ω–µ –±—É–¥—É —É—Å–ø–µ–≤–∞—Ç—å?",
            buttonClass: "b8",
            color: "black",
            content:
                "–° –∫–∞–∂–¥—ã–º —É—á–µ–Ω–∏–∫–æ–º —Ä–∞–±–æ—Ç–∞–µ—Ç –∫—É—Ä–∞—Ç–æ—Ä. –ö –Ω–µ–º—É –º–æ–∂–Ω–æ –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –ø–æ –ª—é–±–æ–º—É \n" +
                "–≤–æ–ø—Ä–æ—Å—É –∏ –æ—Ç–ª–æ–∂–∏—Ç—å —É—Ä–æ–∫, –µ—Å–ª–∏ –Ω–∞–¥–æ. –ü—Ä–æ—Å—Ç–æ –ø—Ä–µ–¥—É–ø—Ä–µ–¥–∏—Ç–µ, —á—Ç–æ –Ω–µ —É—Å–ø–µ–≤–∞–µ—Ç–µ, \n" +
                "–º—ã –ø–µ—Ä–µ–Ω–µ—Å—ë–º –¥–µ–¥–ª–∞–π–Ω.",
        },
        {
            id: "accordion-button-9",
            title:
                "–£—á–∏—Ç—å—Å—è –º–æ–∂–Ω–æ —Ç–æ–ª—å–∫–æ –≥—Ä–∞–∂–¥–∞–Ω–∞–º –†–æ—Å—Å–∏–∏?",
            buttonClass: "b9",
            color: "white",
            content:
                "–û–ø–ª–∞—Ç–∏—Ç—å –∏ –ø—Ä–æ–π—Ç–∏ –º–∞—Ä–∞—Ñ–æ–Ω –º–æ–∂–Ω–æ –∏–∑ –ª—é–±–æ–π —Å—Ç—Ä–∞–Ω—ã. –ù–∞—à–∏ —É—á–µ–Ω–∏–∫–∏ –∂–∏–≤—É—Ç \n" +
                "–≤¬†–ë–µ–ª–∞—Ä—É—Å–∏, –ò—Å–ø–∞–Ω–∏–∏, –Ω–∞ –ë–∞–ª–∏ –∏ –Ω–µ —Ç–æ–ª—å–∫–æ. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É –Ω–∏–∂–µ, –∏ –º—ã —Å –≤–∞–º–∏ \n" +
                "—Å–≤—è–∂–µ–º—Å—è :)",
        },
    ]);

    const faqRef = useRef(null);

    return (
        <div className="main faq" id='FAQ' ref={faqRef}>
            <div className="title">FAQ</div>
            <div className="title-mini-big">FAQ</div>
            <Die style='die-faq'>
                <div>ü§î</div>
                <div>üëÄ</div>
                <div>üìù</div>
                <div>üëáüèª</div>
            </Die>
            <section>
                <div className="accordion">
                    {accordionItems.map((item, index) => (
                        <AccordionItem
                            key={item.id}
                            item={item}
                            index={index}
                            accordionItems={accordionItems}
                            setAccordionItems={setAccordionItems}
                        />
                    ))}
                </div>
            </section>
        </div>
    );
};

const AccordionItem = ({item, index, accordionItems, setAccordionItems}) => {
    const arrowRef = useRef(null);
    const itemRef = useRef(null);

    useEffect((e) => {
        const button = document.getElementById(item.id);

        const toggleAccordion = () => {
            setAccordionItems(
                accordionItems.map((accItem, accIndex) => ({
                    ...accItem,
                    ariaExpanded: accIndex === index ? !accItem.ariaExpanded : false,
                }))
            );
            
        };

        button.addEventListener("click", toggleAccordion);

        return () => {
            button.removeEventListener("click", toggleAccordion);
        };
    }, [item.id, index, accordionItems, setAccordionItems, item.ariaExpanded]);

    return (
        <div className='accordion-item' ref={itemRef} >
            <button id={item.id} aria-expanded={item.ariaExpanded || false} className={item.buttonClass}>
                <div className="accordion-title">{item.title}</div>
                <div className="icon" aria-hidden="true">
                    <img
                        ref={arrowRef}
                        src={item.color === "white" ? arrowWhite : arrowBlack}
                        alt="1"
                        style={{transform: item.ariaExpanded ? "rotate(180deg)" : "rotate(0deg)"}}
                    />
                </div>
            </button>
            <div className="accordion-content">
                <p>{item.content}</p>
            </div>
        </div>
    );
};